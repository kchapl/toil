@(surpluses: model.Surpluses)

@chart(title: String, labels: Seq[String], figures: Seq[model.SurplusFigures]) = {
  <div class="panel panel-default">
    <div class="panel-heading">@title</div>
    <div class="panel-body">
      <canvas id="monthly-chart"
        width="200" height="200"
        data-labels="[@labels.mkString("\"", "\",\"", "\"")]"
        data-surplus="[@figures.map(_.surplus.pounds).mkString(",")]"
        data-income="[@figures.map(_.income.pounds).mkString(",")]"
        data-spend="[@figures.map(_.totalSpend.neg.pounds).mkString(",")]">
      </canvas>
    </div>
  </div>
}

@frame(title = "Surplus", highlightedNavItem = "Surplus") {
  <link href="@routes.Assets.at("lib/datatables/css/dataTables.bootstrap.min.css")" rel="stylesheet">
  }{

  @chart(
    title = "Monthly",
    labels = surpluses.monthly.map(_.yearMonth.getMonth.toString),
    figures = surpluses.monthly.map(_.figures)
  )

  @chart(
    title = "Seasonal",
    labels = surpluses.seasonal.map(_.yearSeason.toString),
    figures = surpluses.seasonal.map(_.figures)
  )

  <script src="@routes.Assets.at("lib/jquery/jquery.min.js")"></script>
  <script src="@routes.Assets.at("lib/bootstrap/js/bootstrap.min.js")"></script>
  <script src="@routes.Assets.at("lib/chartjs/Chart.min.js")"></script>
  <script src="@routes.Assets.at("javascripts/surplus.js")"></script>
}
